<!DOCTYPE html>
<html lang="es">
<head>
  <title>Mi aplicación con gpt-3.5-turbo</title>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: black;
      color: white;
    }

    h1 {
      text-align: center;
      font-size: 40px;
    }

    .container {
      width: 80%;
      margin: 0 auto;
    }

    .form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .input {
      width: 80%;
      padding: 10px;
      margin: 10px;
      border: none;
      border-bottom: 2px solid white;
      background-color: transparent;
      color: white;
    }

    .button {
      width: 20%;
      padding: 10px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      background-color: green;
      color: white;
      cursor: pointer;
    }

    .button:hover {
      background-color: darkgreen;
    }

    .slider {
      width: 80%;
    }

    .label {
      display: flex;
      justify-content: space-between;
    }

    .output {
      width: 80%;
      height: 300px;
      margin: 10px auto;
      padding: 10px;
      border: 2px solid white;
      overflow-y: scroll;
    }
  </style>
</head>
<body>
  <h1>Mi aplicación con gpt-3.5-turbo</h1>
  <div class="container">
    <form class="form" id="form">
      <input type="text" class="input" id="key" placeholder="Introduce tu clave de openai" required>
      <input type="text" class="input" id="prompt" placeholder="Introduce tu consulta a gpt-3.5-turbo" required>
      <div class="label">
        <label for="engine">Engine:</label>
        <select id="engine">
          <option value="davinci">Davinci</option>
          <option value="curie">Curie</option>
          <option value="babbage">Babbage</option>
          <option value="ada">Ada</option>
        </select>
      </div>
      <div class="label">
        <label for="max_tokens">Max tokens:</label>
        <input type="range" class="slider" id="max_tokens" min="1" max="100" value="10">
        <span id="max_tokens_value">10</span>
      </div>
      <div class="label">
        <label for="temperature">Temperature:</label>
        <input type="range" class="slider" id="temperature" min="0" max="1" step="0.01" value="0.5">
        <span id="temperature_value">0.5</span>
      </div>
      
<!-- You can add more parameters here -->

<button type="submit" class="button" id="submit">Enviar consulta</button>
    </form>
    <div class="output" id="output"></div>
  </div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>

// Get the elements from the document
const form = document.getElementById("form");
const key = document.getElementById("key");
const prompt = document.getElementById("prompt");
const engine = document.getElementById("engine");
const max_tokens = document.getElementById("max_tokens");
const max_tokens_value = document.getElementById("max_tokens_value");
const temperature = document.getElementById("temperature");
const temperature_value = document.getElementById("temperature_value");

// You can get more elements here

const output = document.getElementById("output");

// Update the values of the sliders
max_tokens.oninput = function() {
  max_tokens_value.innerHTML = this.value;
}

temperature.oninput = function() {
  temperature_value.innerHTML = this.value;
}

// You can update more values here

// Create an axios instance with the base URL
const client = axios.create({
  baseURL: "https://api.openai.com/v1"
});

// Handle the form submission
form.onsubmit = async function(event) {
  // Prevent the default behavior of the form
  event.preventDefault();

  // Get the values from the elements
  const key_value = key.value.trim();
  const prompt_value = prompt.value.trim();
  const engine_value = engine.value;
  const max_tokens_value = max_tokens.value;
  const temperature_value = temperature.value;

  // You can get more values here

  // Validate the values
  if (!key_value || !prompt_value) {
    alert("Por favor, introduce tu clave de openai y tu consulta a gpt-3.5-turbo");
    return;
  }

  // Create the parameters object
  const params = {
    prompt: prompt_value,
    max_tokens: max_tokens_value,
    temperature: temperature_value
  };

  // You can add more parameters here

  // Make the API call using axios
  try {
    // Show a message that the request is being processed
    output.innerHTML = "Procesando tu consulta...";

    // Set the authorization header with the key value
    client.defaults.headers.common["Authorization"] = "Bearer " + key_value;

    // Post the request to the completions endpoint of the selected engine
    const response = await client.post("/engines/" + engine_value + "/completions", params);

    // Get the text from the response data
    const text = response.data.choices[0].text;

    // Show the text in the output element
    output.innerHTML = prompt_value + text;
  } catch (error) {
    // Show the error message in the output element
    output.innerHTML = "Ha ocurrido un error: " + error.message;
  }
};

</script>
</body>
</html>
